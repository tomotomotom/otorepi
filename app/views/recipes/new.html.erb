<h1>レシピを登録する</h1>

<%= simple_form_for @recipe do |f| %>
  <%= f.input :title, label: "レシピタイトル" %>
  <%= f.input :description, label: "レシピの説明" %>

  <h2>材料</h2>
  <% @recipe.ingredients.each_with_index do |ingredient, i| %>
    <%= f.simple_fields_for :ingredients, ingredient do |ingredient_fields| %>
      <div class="ingredient-block">
        <%= ingredient_fields.input :name, label: "材料名 ##{i+1}" %>
        <%= ingredient_fields.input :quantity, label: "分量" %>
      </div>
    <% end %>
  <% end %>

  <h2>手順</h2>
  <% @recipe.steps.each_with_index do |step, i| %>
    <%= f.simple_fields_for :steps, step do |step_fields| %>
      <div class="step-block">
        <%= step_fields.input :number, label: "ステップ番号", input_html: { value: step.number || i + 1 } %>
        <%= step_fields.input :content, label: "手順内容" %>
      </div>
    <% end %>
  <% end %>

  <%= f.button :submit, "レシピを登録する" %>
<% end %>
